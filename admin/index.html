<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>StateOfRochester · Admin</title>
</head>
<body>
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js?v=2"></script>
  <script>
    CMS.init({
      config: {
        backend: {
          name: "github",
          repo: "FishMan2341/stateofochester",
          branch: "main",
          auth_type: "pkce",
          app_id: "Ov23liH02WRAfllQYxnh"
        },
        media_folder: "images/uploads",
        public_folder: "/images/uploads",
        site_url: "https://crisis-meter.vercel.app",
        display_url: "https://crisis-meter.vercel.app",
        load_config_file: false,
        collections: [
          {
            name: "crisis_meter",
            label: "Crisis Meter",
            files: [
              {
                name: "meter",
                label: "Crisis Meter Settings",
                file: "_data/crisis-meter.json",
                fields: [
                  {
                    label: "Meter Level",
                    name: "level",
                    widget: "number",
                    min: 0,
                    max: 100,
                    step: 1,
                    hint: "0 = Critical (red), 100 = All Clear (green)"
                  },
                  {
                    label: "Status Label",
                    name: "label",
                    widget: "string",
                    hint: "e.g. Elevated Concern, All Clear, Critical"
                  },
                  {
                    label: "Status Description",
                    name: "description",
                    widget: "text",
                    hint: "Short explanation shown below the meter bar on the homepage"
                  },
                  {
                    label: "Last Updated Note",
                    name: "updated_note",
                    widget: "string",
                    hint: "Optional context about when/why it was last changed"
                  }
                ]
              }
            ]
          },
          {
            name: "articles",
            label: "Articles",
            folder: "_articles",
            create: true,
            slug: "{{slug}}",
            fields: [
              { label: "Title", name: "title", widget: "string" },
              {
                label: "Publish Date",
                name: "date",
                widget: "datetime",
                format: "MMMM DD, YYYY",
                date_format: "MMMM DD, YYYY",
                time_format: false
              },
              {
                label: "Category",
                name: "category",
                widget: "select",
                options: [
                  { label: "Safety", value: "safety" },
                  { label: "Schools", value: "schools" },
                  { label: "Neighborhoods", value: "neighborhoods" },
                  { label: "Events", value: "events" },
                  { label: "Health", value: "health" },
                  { label: "Infrastructure", value: "infrastructure" },
                  { label: "City Hall", value: "city-hall" }
                ]
              },
              { label: "Author", name: "author", widget: "string", default: "Staff Reporter" },
              { label: "Read Time", name: "read_time", widget: "string", default: "3 min read", hint: "e.g. 2 min read, 5 min read" },
              { label: "Dek (Subtitle)", name: "dek", widget: "text", required: false, hint: "One or two sentence summary shown below the headline" },
              { label: "Hero Image", name: "hero_image", widget: "image", required: false, hint: "Optional. Displayed at the top of the article." },
              { label: "Hero Image Caption", name: "hero_caption", widget: "string", required: false },
              { label: "Body", name: "body", widget: "markdown" },
              { label: "Featured on Homepage", name: "featured", widget: "boolean", default: false, hint: "If checked, this article will appear as the top story on the homepage" }
            ]
          },
          {
            name: "settings",
            label: "Site Settings",
            files: [
              {
                name: "general",
                label: "General Settings",
                file: "_data/settings.json",
                fields: [
                  { label: "Site Tagline", name: "tagline", widget: "string", default: "The community pulse of the Flower City" },
                  { label: "Footer Copyright Text", name: "copyright", widget: "string", default: "© 2025 StateOfRochester. All rights reserved." }
                ]
              }
            ]
          }
        ]
      }
    });
  </script>
</body>
</html>
